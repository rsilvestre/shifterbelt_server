{"version":3,"sources":["tariff.es6"],"names":[],"mappings":";;;;;;;;wBAIqB,UAAU;;;;AAE/B,IAAI,MAAM,GAAG,sBAAS,MAAM,CAAC;;AAE7B,IAAI,oBAAoB,GAAG,SAAvB,oBAAoB,CAAI,KAAK,EAAK;AACpC,cAAY,CAAC;AACb,SAAO,KAAK,IAAI,CAAC,CAAC;CACnB,CAAC;;;;;;AAMF,IAAI,YAAY,GAAG,IAAI,MAAM,CAAC;AAC5B,MAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,yBAAyB,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,sBAAsB,EAAE,IAAI,EAAE,IAAI,EAAE;AACpH,aAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,kCAAkC,EAAE;AAC3E,YAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,yCAAyC,EAAE;AACjF,SAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,sCAAsC,EAAE;AAC3E,OAAK,EAAE,CAAC;AACN,SAAK,EAAE;AACL,UAAI,EAAE,MAAM;AACZ,cAAQ,EAAE,wBAAwB;AAClC,cAAQ,EAAE,CAAC,oBAAoB,EAAE,sCAAsC,CAAC;KACzE;AACD,aAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,WAAS,IAAI,CAAC,GAAG,EAAE;GAC7C,CAAC;AACF,WAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,WAAS,IAAI,CAAC,GAAG,EAAE;CAC7C,CAAC,CAAC;;;;;;AAMH,YAAY,CAAC,OAAO,GAAG;;;;;;;AAOrB,QAAM,EAAE,gBAAS,EAAE,EAAE,EAAE,EAAE;AACvB,gBAAY,CAAC;;AAEb,QAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,CACtB,IAAI,CAAC,EAAE,CAAC,CAAC;GACb;;;;;;;AAOD,UAAQ,EAAE,kBAAS,IAAI,EAAE,EAAE,EAAE;AAC3B,gBAAY,CAAC;;AAEb,QAAI,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CACzB,IAAI,CAAC,EAAE,CAAC,CAAC;GACb;;;;;;AAMD,KAAG,EAAE,aAAS,EAAE,EAAE;AAChB,gBAAY,CAAC;;AAEb,QAAI,CAAC,IAAI,EAAE,CACR,IAAI,CAAC,EAAE,CAAC,CAAC;GACb;;;;;;AAMD,YAAU,EAAE,oBAAS,EAAE,EAAE;AACvB,gBAAY,CAAC;;AAEb,QAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE,UAAU,EAAE,EAAE,OAAO,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,aAAa,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CACjG,IAAI,CAAC,EAAE,CAAC,CAAC;GACb;;;;;;AAMD,SAAO,EAAE,iBAAS,EAAE,EAAE;AACpB,gBAAY,CAAC;;AAEb,QAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE,UAAU,EAAE,EAAE,OAAO,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAC5D,IAAI,CAAC,EAAE,CAAC,CAAC;GACb;CACF,CAAC;;AAEF,sBAAS,KAAK,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC","file":"tariff.js","sourcesContent":["/**\n * Created by michaelsilvestre on 1/06/15\n */\n\nimport mongoose from 'mongoose';\n\nlet Schema = mongoose.Schema;\n\nlet priceGreaterThanZero = (price) => {\n  \"use strict\";\n  return price >= 0;\n};\n\n/**\n * Application Schema\n * @type {*|Schema}\n */\nlet TariffSchema = new Schema({\n  name: { type: String, required: \"A name should be setted\", index: true, unique: \"Name cannot be blank\", trim: true },\n  description: { type: String, required: \"A description should be provided\" },\n  connection: { type: Number, required: \"A number of connection should be setted\" },\n  message: { type: Number, requirde: \"A number of message should be setted\" },\n  price: [{\n    value: {\n      type: Number,\n      required: \"A price cannot be null\",\n      validate: [priceGreaterThanZero, \"The price should be bigger than zero\"]\n    },\n    createdAt: { type: Date, default: Date.now }\n  }],\n  createdAt: { type: Date, default: Date.now }\n});\n\n/**\n * Static\n * @type {{}}\n */\nTariffSchema.statics = {\n\n  /**\n   *\n   * @param {String} id\n   * @param {Function} cb\n   */\n  loadId: function(id, cb) {\n    \"use strict\";\n\n    this.findOne({ _id: id })\n      .exec(cb);\n  },\n\n  /**\n   *\n   * @param {String} name\n   * @param {Function} cb\n   */\n  loadName: function(name, cb) {\n    \"use strict\";\n\n    this.findOne({ name: name })\n      .exec(cb);\n  },\n\n  /**\n   *\n   * @param {Function} cb\n   */\n  all: function(cb) {\n    \"use strict\";\n\n    this.find()\n      .exec(cb);\n  },\n\n  /**\n   *\n   * @param {Function} cb\n   */\n  allNotFree: function(cb) {\n    \"use strict\";\n\n    this.find({ \"price\": { $elemMatch: { \"value\": { $gt: 0 } } } }, {}, { sort: { \"price.value\": -1 } })\n      .exec(cb);\n  },\n\n  /**\n   *\n   * @param {Function} cb\n   */\n  allFree: function(cb) {\n    \"use strict\";\n\n    this.find({ \"price\": { $elemMatch: { \"value\": { $eq: 0 } } } })\n      .exec(cb);\n  }\n};\n\nmongoose.model('Tariff', TariffSchema);\n"]}