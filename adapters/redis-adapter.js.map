{"version":3,"sources":["redis-adapter.es6"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;qBAIkB,OAAO;;;;8BACD,qBAAqB;;IAAjC,MAAM;;4BACK,iBAAiB;;;;mBACxB,KAAK;;;;IAEA,YAAY;AACpB,WADQ,YAAY,CACnB,QAAQ,EAAE;0BADH,YAAY;;AAE7B,+BAFiB,YAAY,6CAEvB,QAAQ,EAAE;AAChB,QAAI,CAAC,IAAI,EAAE,CAAC;AACZ,WAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;AAC3C,YAAQ,CAAC,IAAI,CAAC,CAAC;GAChB;;YANkB,YAAY;;eAAZ,YAAY;;WAQ3B,gBAAG;AACL,UAAI,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;AACtD,UAAI,QAAQ,GAAG,iBAAI,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC,CAAC;;AAEnD,UAAI,CAAC,YAAY,GAAG,mBAAM,YAAY,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,QAAQ,EAAE,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC;;AAEnG,UAAI,QAAQ,CAAC,IAAI,EAAE;AACjB,YAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;OACrD;;AAED,UAAI,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,EAAE,UAAS,GAAG,EAAE;AAC1C,oBAAY,CAAC;;AAEb,eAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;AAC5B,WAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;OAC1B,CAAC,CAAC;KACJ;;;SAES,YAAG;AACX,aAAO,IAAI,CAAC,YAAY,CAAC;KAC1B;;;SA5BkB,YAAY;;;qBAAZ,YAAY","file":"redis-adapter.js","sourcesContent":["/**\n * Created by michaelsilvestre on 19/04/15\n */\n\nimport redis from \"redis\"\nimport * as config from \"../config/config.js\"\nimport AbsAdapter from \"./absAdapter.js\"\nimport url from \"url\"\n\nexport default class RedisAdapter extends AbsAdapter {\n  constructor(callback) {\n    super(\"memory\");\n    this.init();\n    console.log('redis successfull connected');\n    callback(this);\n  }\n\n  init() {\n    let redisConfig = config.adapters.getConfig(\"memory\");\n    var redisURL = url.parse(redisConfig.defaultUrl());\n\n    this._redisClient = redis.createClient(redisURL.port, redisURL.hostname, { no_ready_check: true });\n\n    if (redisURL.auth) {\n      this._redisClient.auth(redisURL.auth.split(\":\")[1]);\n    }\n\n    this._redisClient.on('error', function(err) {\n      \"use strict\";\n\n      console.log('Error ' + err);\n      log.info('Error ' + err);\n    });\n  }\n\n  get client() {\n    return this._redisClient;\n  }\n\n}\n"]}