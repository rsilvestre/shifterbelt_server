{"version":3,"sources":["mongoose-adapter.es6"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;wBAIqB,UAAU;;;;8BACP,qBAAqB;;IAAjC,MAAM;;4BACK,iBAAiB;;;;2BACjB,kBAAkB;;IAEpB,eAAe;AACvB,WADQ,eAAe,CACtB,QAAQ,EAAE;0BADH,eAAe;;AAEhC,+BAFiB,eAAe,6CAE1B,UAAU,EAAE;;AAElB,QAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;GACrB;;YALkB,eAAe;;eAAf,eAAe;;WAO9B,cAAC,QAAQ,EAAE;;;AACb,UAAI,cAAc,GAAG,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;;AAE3D,UAAI,CAAC,SAAS,wBAAW,CAAC;;AAE1B,UAAI,CAAC,SAAS,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;AAC3C,UAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;AACrC,UAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,YAAM;AAC1B,eAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;AAC9C,qBAlBG,MAAM,CAkBF,IAAI,CAAC,gCAAgC,CAAC,CAAC;AAC9C,gBAAQ,OAAM,CAAC;OAChB,CAAC,CAAC;KACJ;;;SAEa,YAAG;AACf,aAAO,IAAI,CAAC,GAAG,CAAC;KACjB;;;SAEQ,YAAG;AACV,aAAO,IAAI,CAAC,SAAS,CAAC;KACvB;;;SA3BkB,eAAe;;;qBAAf,eAAe","file":"mongoose-adapter.js","sourcesContent":["/**\n * Created by michaelsilvestre on 23/04/15\n */\n\nimport mongoose from \"mongoose\"\nimport * as config from \"../config/config.js\"\nimport AbsAdapter from \"./absAdapter.js\"\nimport { logger } from \"../lib/logger.js\"\n\nexport default class MongooseAdapter extends AbsAdapter {\n  constructor(callback) {\n    super(\"database\");\n\n    this.init(callback);\n  }\n\n  init(callback) {\n    let mongooseConfig = config.adapters.getConfig(\"database\");\n\n    this._mongoose = mongoose;\n\n    this._mongoose.connect(mongooseConfig.url);\n    this._db = this._mongoose.connection;\n    this._db.once('open', () => {\n      console.log('mongoose successfull connected');\n      logger.info('mongoose successfull connected');\n      callback(this);\n    });\n  }\n\n  get connection() {\n    return this._db;\n  }\n\n  get mongo() {\n    return this._mongoose;\n  }\n}\n"]}