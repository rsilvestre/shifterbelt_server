{"version":3,"sources":["app.es6"],"names":[],"mappings":";;;;;;;;;;;;;;;iCAG6B,wBAAwB;;oCAC5B,0BAA0B;;mCAC5B,0BAA0B;;;;2BAC1B,iBAAiB;;IAEnB,GAAG;AACX,WADQ,GAAG,GACR;0BADK,GAAG;;AAEpB,QAAI,CAAC,IAAI,EAAE,CAAC;GACb;;eAHkB,GAAG;;WAKlB,gBAAG;;AAEL,UAAI,UAAU,GAAG,sCAAgB,CAAC;AAClC,mBAVK,MAAM,CAUJ,IAAI,CAAC,qBAAqB,CAAC,CAAC;;AAEnC,aAAO,CAAC,EAAE,CAAC,QAAQ,EAAE,YAAM;AACzB,qBAbG,MAAM,CAaF,IAAI,CAAC,uCAAuC,CAAC,CAAC;AACrD,kBAAU,CAAC,KAAK,CAAC,YAAK;AACpB,oBAAU,CAAC,YAAM;AACf,kCAlBD,QAAQ,CAkBE,UAAU,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,YAAM;AACvC,oCAnBH,QAAQ,CAmBI,UAAU,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,YAAM;AAC3C,uBAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;eACjB,CAAC,CAAC;aACJ,CAAC,CAAC;WACJ,EAAE,IAAI,CAAC,CAAC;SACV,CAAC,CAAC;OACJ,CAAC,CAAC;KACJ;;;WAEO,oBAAG;AACT,UAAI,YAAY,GAAG,sBA7Bd,QAAQ,CA6Be,UAAU,CAAC,UAAU,CAAC,CAAC;;AAEnD,UAAI,QAAQ,GAAG,SAAX,QAAQ,CAAY,GAAG,EAAE,MAAM,EAAE;AACnC,YAAI,GAAG,EAAE,MAAM,GAAG,CAAC;AACnB,YAAI,YAAY,GAAG,EAAE,CAAC;AACtB,cAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AAC3B,sBAAY,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,GAAG,mBApCtC,YAAY,CAoCuC,WAAW,CAAC,aAAa,EAAE,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC;SAC1G,CAAC,CAAC;AACH,eAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC1B,qBApCG,MAAM,CAoCF,IAAI,CAAC,YAAY,CAAC,CAAC;AAC1B,oBAAY,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;OACjC,CAAC;AACF,UAAI,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC;;AAE/B,UAAI,OAAO,GAAG,IAAI,KAAK,CAAC,OAAO,EAAE,CAAC;;AAElC,aAAO,CAAC,OAAO,CAAC,gCAAgC,EAAE,UAAC,GAAG,EAAE,OAAO,EAAE,WAAW,EAAK;AAC/E,YAAI,GAAG,EAAE,OAAO,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACpC,eAAO,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;OAChC,CAAC,CAAC;;;KAGJ;;;SA/CkB,GAAG;;;qBAAH,GAAG","file":"app.js","sourcesContent":["/**\n * Created by michaelsilvestre on 19/04/15\n */\nimport { modelManager } from \"./lib/model-manager.js\"\nimport { adapters } from \"./adapters/absAdapter.js\"\nimport Controller from \"./controller/index.js.js\"\nimport { logger } from \"./lib/logger.js\"\n\nexport default class App {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n\n    let controller = new Controller();\n    logger.info(\"Shifterbelt started\");\n\n    process.on('SIGINT', () => {\n      logger.info(\"Shifterbelt is in the closing process\");\n      controller.close(()=> {\n        setTimeout(() => {\n          adapters.getAdapter(\"queue\").close(() => {\n            adapters.getAdapter('websocket').close(() => {\n              process.exit(0);\n            });\n          });\n        }, 5000);\n      });\n    });\n  }\n\n  init_bak() {\n    let mssqlAdapter = adapters.getAdapter(\"database\");\n\n    let callback = function(err, result) {\n      if (err) throw err;\n      let applications = {};\n      result[0].forEach((value) => {\n        applications[value[\"ApplicationId\"]] = modelManager.instanciate(\"Application\", value['ApplicationName']);\n      });\n      console.log(applications);\n      logger.info(applications);\n      mssqlAdapter.connection.close();\n    };\n    let mssql = mssqlAdapter.mssql;\n\n    let request = new mssql.Request();\n\n    request.execute('[dbo].[Applications.SelectAll]', (err, records, returnValue) => {\n      if (err) return callback(err, null);\n      return callback(null, records);\n    });\n    //console.log(mssqlAdapter.mssql);\n    //logger.info(mssqlAdapter.mssql);\n  }\n}\n\n"]}